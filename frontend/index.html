<!DOCTYPE html>

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>ft_transcendence</title>
	<link rel="icon" type="image/png" href="/42_Logo.svg" />
	<link href="./tailwind.css" rel="stylesheet" />
	<script type="module" src="./src/main.ts"></script>

</head>

<html lang="en"
 class="dark overflow-x-hidden selection:bg-accent-orange
  dark:selection:bg-accent-pink selection:text-black dark:selection:text-white">

<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100">

	<div id="container-grid"
		class="relative h-max flex flex-col items-center justify-center overflow-hidden bg-white dark:bg-black">
		<div id="main-grid" class="fixed inset-0 bg-[length:40px_40px] pointer-events-none z-20
		bg-[linear-gradient(to_right,#f2f2f2_1px,transparent_1px),linear-gradient(to_bottom,#d9d9d9_1px,transparent_1px)]
		dark:bg-[linear-gradient(to_right,#262626_1px,transparent_1px),linear-gradient(to_bottom,#262626_1px,transparent_1px)]
		opacity-60 mix-blend-darken dark:mix-blend-lighten [mask-image:linear-gradient(transparent_10%,black)]"></div>
		<div id="header-shader" class="fixed inset-0 h-full w-full z-10 mix-blend-difference
		bg-accent-orange dark:bg-accent-pink [clip-path:polygon(0_0,45%_0,25%_100%,0%_100%)]">
		</div>
	</div>

	<!-- Decorative shadows -->
	<div class="shadow-[10px_10px_0_0] shadow-accent-orange dark:shadow-accent-green"> </div>

	<!-- Search bar, small user card and theme switch button-->
	<div id="top-bar"
		class=" flex z-20 items-end justify-end p-2 space-x-4 text-black dark:text-white w-full shadow-md
		border-b-[2px] border-gray-800 dark:border-gray-300 hover:border-accent-blue dark:hover:border-accent-green transition-colors bg-gray-100 dark:bg-gray-900">

		<!-- User options -->
		<div id="user-options" title="Go to profile" class="flex z-30 items-center hidden justify-center min-w-0">
			<a href="/profile" class="flex items-center gap-3 min-w-0">
				<img id="topbar-avatar"
					src="/assets/placeholder-avatar.jpg"
					alt="avatar"
					width="40" height="40"
					style="min-width:40px;min-height:40px;"
					class="content-evenly w-10 h-10 border-neutral-800 dark:border-neutral-200 object-cover rounded-xl bg-neutral-700 hover:bg-gray-900 border-2 transition-colors dark:bg-neutral-300 dark:hover:bg-neutral-100 flex-shrink-0" />
				<p id="topbar-username" style="min-width:25ch; max-width:40vw;" class="sm:block ms-2 text-xl font-bold truncate px-2 tracking-tight mb-0 hover:text-white hover:bg-black dark:hover:bg-white dark:hover:text-black">Username</p>
			</a>
		</div>

		<!-- Search form -->
		<form class="w-full px-[12vw] mx-auto z-30 hidden" id="search-user-form" title="search other users to play with">
			<div class="flex shadow-xs rounded-base -space-x-1">
				<input type="search" id="search-user-input"
					title="search users"
					class="px-3 py-2.5 bg-gray-300 dark:bg-gray-800 rounded-l-xl border border-medium border-gray-900 dark:border-accent-green text-heading text-sm focus:ring-brand focus:border-brand block w-full placeholder:text-body"
					data-i18n-placeholder="search.placeholder" required>
				<button type="button"
					title="confirm search"
					class="inline-flex items-center text-black font-bold bg-accent-orange dark:bg-accent-green rounded-r-xl bg-brand hover:bg-brand-strong border-l-0 box-border border border-gray-700 dark:border-accent-green focus:ring-4 focus:ring-brand-medium shadow-xs leading-5 rounded-e-base bx-10 text-sm px-4 py-2.5 focus:outline-none"
					>
					<svg class="w-4 h-4 me-1.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24"
						height="24" fill="none" viewBox="0 0 24 24">
						<path stroke="currentColor" stroke-linecap="round" stroke-width="2"
							d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z" />
					</svg>
					<h1 data-i18n="search.button">
					</h1>
				</button>
			</div> 
		</form>

		<!-- Language selector styled like theme button -->
		<select id="profile-language" aria-label="Select language" title="Select language"
			class="relative z-30 pointer-events-auto cursor-pointer py-2 rounded-lg border-2 border-neutral-800 bg-neutral-700 hover:bg-gray-900 transition-colors ml-2 text-white text-sm appearance-auto dark:border-neutral-200 dark:bg-neutral-300 dark:hover:bg-neutral-100 dark:text-black">
			<option value="en">EN</option>
			<option value="fr">FR</option>
			<option value="it">IT</option>
		</select>
		
		<!-- Theme Toggle Button -->
		<button id="theme-toggle-btn" class="p-2 z-20 rounded-xl border-2 border-neutral-800 bg-neutral-700 hover:bg-gray-900 transition-colors ml-2
					dark:border-neutral-200 dark:bg-neutral-300 dark:hover:bg-neutral-100"
			title="Toggle dark/light mode">
			<svg class="w-5 h-5 text-white dark:text-black" fill="none" viewBox="0 0 24 24"
				stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
					d="M12 3v1m6.364 1.636l-.707.707M21 12h-1m-1.636-6.364l-.707-.707M12 21v-1m-6.364-1.636l.707-.707M3 12h1m1.636 6.364l.707.707M12 12a3 3 0 110-6 3 3 0 010 6z" />
			</svg>
		</button>
	</div>

	<!-- Search Results Dropdown -->
	<div id="search-results-dropdown"
		class="fixed left-0 right-0 z-40 bg-neutral-900 dark:bg-neutral-800 border-x-2 border-b-2 border-accent-orange dark:border-accent-green hidden shadow-[0_10px_20px_rgba(0,0,0,0.5)]">
		<!-- Results will be injected here -->
	</div>

	<!-- Main content-->
	<main id="main-content"
		class="z-0 cards w-full min-h-screen px-4 sm:px-8 lg:px-16" style="padding-top: 0px">
			<!-- Routed content will be injected here -->
		<div class="text-center">
			<div role="status">
				<svg aria-hidden="true" class="inline w-40 h-40 text-neutral-tertiary animate-spin fill-brand" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentFill"/>
					<path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"/>
				</svg>
				<span class="sr-only">Loading...</span>
			</div>
		</div>
	</main>


	<!-- TEMPLATES (PLACED OUTSIDE MAIN-CONTENT TO AVOID BEING CLEARED BY ROUTER) -->

	<!-- Login & Register & 2fa-->
	<template id="login-template">
		<div id="container"
			class="w-full flex items-center justify-center p-4 sm:p-6 md:p-8 gap-10 rounded-xl relative z-30">

			<div class="card shadow-[10px_10px_0_0_#ff6b35] dark:shadow-[10px_10px_0_0_#0dff66]
					overflow-hidden rounded-xl
					hover:shadow-lg dark:hover:shadow-lg dark:hover:brightness-90 hover:brightness-105 transition-all duration-300">

				<!-- LOGIN -->
				<form id="login-form"
				class="flex w-full max-w-2xl flex-col gap-4 p-6">

					<!-- Title -->
					<h1 class="text-3xl font-bold text-left mb-2 text-black dark:text-white" data-i18n="auth.signIn">
					</h1>

						<!-- Description -->
						<p class="text-xl text-neutral-600 dark:text-neutral-400 mb-4 text-left" data-i18n="auth.signInDesc"></p>
						<!-- Email -->
						<div class="flex flex-col gap-1">
							<label for="email_log" class="text-sm text-neutral-700 dark:text-neutral-300">Email</label>
							<input
								id="email_log"
								name="email"
								type="email"
								placeholder="you@example.com"
							class="rounded-md dark:bg-black bg-white border dark:border-neutral-700 border-neutral-300 px-4 py-2 text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-[accent-orange] dark:focus:ring-[accent-green]" />
					</div>

					<!-- Password -->
					<div class="flex flex-col gap-1">
						<label for="password_log" class="text-sm text-neutral-700 dark:text-neutral-300">Password</label>
						<input
							id="password_log"
							name="password"
							type="password"
							placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
							class="rounded-md dark:bg-black bg-white border dark:border-neutral-700 border-neutral-300
									px-4 py-2 text-black dark:text-white focus:outline-none
									focus:ring-2 focus:ring-[accent-orange] dark:focus:ring-[accent-green]" />
					</div>

					<!-- Submit -->
					<button
						type="submit"
						class="mt-4 w-full rounded-md bg-[#ff6b35] dark:bg-[#0dff66] px-4 py-2 opacity-100
							font-bold text-white dark:text-black hover:brightness-105 dark:hover:brightness-90 transition" data-i18n="auth.signIn">
					</button>

					<!-- Footer -->
					<div class="mt-4 text-xl text-neutral-400 text-center">
						<a
						id="to-register"
						href="#"
						class="text-accent-blue dark:text-accent-cyan hover:underline" data-i18n="auth.noAccount">
						</a>
					</div>
				</form>

				<!--REGISTER-->

				<div id ="register-section"
					class="w-full flex hidden items-center justify-center p-4 sm:p-6 md:p-8 gap-10 rounded-xl">
					<form
						id="register-form"
						class="flex w-full max-w-2xl flex-col gap-4 p-6">

						<!-- Title -->
						<h1 id="register-title" class="text-3xl font-bold text-left mb-2 text-black dark:text-white" data-i18n="site.create-account">
						</h1>

						<!-- Description -->
						<p id="register-desc" class="text-xl text-neutral-600 dark:text-neutral-400 mb-4 text-left" data-i18n="site.pick-name">
						</p>

						<!-- Username -->
						<div class="flex flex-col gap-1">
							<label for="register-username" class="text-sm text-neutral-700 dark:text-neutral-300">Username</label>
							<input
								id="register-username"
								name="username"
								type="text"
								placeholder="john_doe"
								class="rounded-md dark:bg-black bg-white border dark:border-neutral-700 border-neutral-300 px-4 py-2 text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-[accent-orange] dark:focus:ring-[accent-green]" />
						</div>

						<!-- Email -->
						<div class="flex flex-col gap-1">
							<label for="register-email" class="text-sm text-neutral-700 dark:text-neutral-300">Email</label>
							<input
								id="register-email"
								name="email"
								type="email"
								placeholder="you@example.com"
								class="rounded-md dark:bg-black bg-white border dark:border-neutral-700 border-neutral-300 px-4 py-2 text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-[accent-orange] dark:focus:ring-[accent-green]" />
						</div>

						<!-- Password -->
						<div class="flex flex-col gap-1">
							<label for="register-password" class="text-sm text-neutral-700 dark:text-neutral-300">Password</label>
							<input
								id="register-password"
								name="password"
								type="password"
								placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
								class="rounded-md dark:bg-black bg-white border dark:border-neutral-700 border-neutral-300 px-4 py-2 text-black dark:text-white focus:outline-none focus:ring-2 focus:ring-[accent-orange] dark:focus:ring-[accent-green]" />
						</div>

						<!-- Error container -->
						<div id="register-error" class="hidden text-red-400 text-sm"></div>

						<!-- Submit -->
						<button
							id="submit-register"
							type="submit"
							class="mt-4 w-full rounded-md bg-[#ff6b35] dark:bg-[#0dff66] px-4 py-2 font-bold text-white dark:text-black hover:brightness-105 dark:hover:brightness-90 transition"
							data-i18n="site.create-account">
						</button>

						<!-- Footer -->
						<div class="mt-4 text-xl text-neutral-400 text-center">
							<a
								id="to-login-from-register"
								href="#"
								class="text-accent-blue dark:text-accent-cyan hover:underline"
								data-i18n="site.sign-in">
							</a>
						</div>
					</form>
				</div>
			</div>

			<!-- TWO FACTOR AUTH-->
			<div id="2fa-section"
				class="w-full flex hidden items-center justify-center sm:p-6 md:p-8 gap-10 rounded-xl relative z-30">	
				<div class="card shadow-[10px_10px_0_0_#ff6b35] dark:shadow-[10px_10px_0_0_#0dff66]
					overflow-hidden rounded-xl bg-white dark:bg-black w-fit
					hover:shadow-lg dark:hover:shadow-lg dark:hover:brightness-90 hover:brightness-105 transition-all duration-300">
					<form id="2fa-form" novalidate class="flex flex-col gap-4 p-6 sm:max-w-[30rem] mx-auto">
					
					<h1 class="text-3xl font-bold text-left mb-2 text-black dark:text-white" data-i18n="auth.2fa.title">
					</h1>

					<p class="text-xl text-neutral-600 dark:text-neutral-400 mb-4 text-left break-words" data-i18n="auth.2fa.desc">
					</p>

					<div class="flex flex-col w-full">
					<label class="text-sm text-neutral-700 dark:text-neutral-300" data-i18n="auth.2fa.codeLabel">Verification Code</label>
					<div class="flex justify-center gap-x-2 py-2" data-pin-input>
						<input type="text" inputmode="numeric" maxlength="1" pattern="[0-9]*" data-index="0" aria-label="Digit 1" class="otp-tile" />
						<input type="text" inputmode="numeric" maxlength="1" pattern="[0-9]*" data-index="1" aria-label="Digit 2" class="otp-tile" />
						<input type="text" inputmode="numeric" maxlength="1" pattern="[0-9]*" data-index="2" aria-label="Digit 3" class="otp-tile" />
						<input type="text" inputmode="numeric" maxlength="1" pattern="[0-9]*" data-index="3" aria-label="Digit 4" class="otp-tile" />
						<input type="text" inputmode="numeric" maxlength="1" pattern="[0-9]*" data-index="4" aria-label="Digit 5" class="otp-tile" />
						<input type="text" inputmode="numeric" maxlength="1" pattern="[0-9]*" data-index="5" aria-label="Digit 6" class="otp-tile" />
					</div>
					<!-- Hidden single input to enable OS-level one-time-code autofill on mobile -->
					<input id="2fa-otp-hidden" autocomplete="one-time-code" inputmode="numeric" type="text" class="sr-only" aria-hidden="true" />

					<div id="2fa-error" class="hidden text-red-400 text-sm" data-i18n="auth.2fa.invalid">Invalid code. Please try again.</div>
					</div>

					<button
					type="submit"
					class="mt-4 w-full rounded-md bg-[#ff6b35] dark:bg-[#0dff66] px-4 py-2
						font-bold text-white dark:text-black hover:brightness-105 dark:hover:brightness-90 transition">
					<span data-i18n="auth.2fa.submit"></span>
					</button>
				</form>
				</div>
			</div>

		</div>
	</template>

	<!-- Main profile -->
	<template id="profile-template">
		<div class="w-full cards flex items-center justify-center pb-96 gap-10 rounded-xl pt-0 -mt-20" id="container">
			<div
				class="card shadow-[10px_10px_0_0_#ff6b35] dark:shadow-[10px_10px_0_0_#0dff66]
					overflow-hidden rounded-xl
					hover:shadow-lg dark:hover:shadow-lg dark:hover:brightness-90 hover:brightness-105 transition-all duration-300"
				style="transform: scale(0.8);">
				<div class="pt-4 px-4 pb-1 w-full flex flex-col gap-0">
					<!-- Header with avatar and title -->
					<div class="flex flex-col md:flex-row items-start gap-4 sm:gap-6 md:gap-8 mb-8">
						<!-- Avatar -->
						<div class="relative flex-shrink-0 z-30">
							<label class="cursor-pointer">
								<input id="input-avatar" type="file" class="hidden" />
								
								<div class="relative w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 aspect-square rounded-md overflow-hidden border-4 border-gray-400 dark:border-neutral-400 flex items-center justify-center bg-gray-200 dark:bg-neutral-800">
									<img id="profile-avatar" alt="avatar" class="w-full h-full object-cover" src="/assets/placeholder-avatar.jpg" />
									<figcaption class="absolute w-full h-full opacity-0 bg-black/0 transition duration-300 ease-in-out hover:opacity-100 hover:bg-black/70 cursor-pointer flex items-center justify-center">
										<svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.217A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.217A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
										</svg>
									</figcaption>
								</div>
							</label>
						</div>

							<!-- Title and info section -->
							<div class="flex-1 w-full z-30 min-w-0">
								<!-- Username -->
								<div class="flex items-center gap-2 mb-4 sm:mb-6 min-w-0">
									<h1 id="profile-username" class="flex-none min-w-0 text-2xl sm:text-3xl md:text-4xl font-extrabold tracking-tight text-accent-orange dark:text-accent-green truncate" style="max-width:20ch;">User</h1>
									<button id="profile-edit-username-btn" class="ml-2 p-1 text-gray-500 hover:opacity-70 transition-opacity flex-shrink-0" title="Edit username">
										<svg class="w-6 h-6 sm:w-7 sm:h-7 md:w-8 md:h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
										</svg>
									</button>
								</div>
								
								<!-- Email and ID -->
								<div class="mb-4 sm:mb-6 text-sm sm:text-base md:text-lg">
									<div class="flex items-center gap-2">
										<span class="font-extrabold text-black dark:text-white">Email:</span> 
										<span class="text-gray-600 dark:text-neutral-400" id="profile-email">email@example.com</span>
									</div>
								</div>

							<!-- Action buttons and 2FA toggle -->
							<div class="flex flex-wrap gap-2 sm:gap-3 items-center justify-start w-full">
								<!-- Chat button -->
								<button id="profile-chat-btn" class="h-10 flex items-center justify-center px-3 sm:px-6 text-xs sm:text-sm md:text-base bg-accent-orange dark:bg-accent-green text-black font-extrabold uppercase tracking-tight hover:brightness-90 transition whitespace-nowrap rounded">
									Chat
								</button>
								<!-- Logout button -->
								<button id="profile-logout-btn" class="h-10 flex items-center justify-center px-3 sm:px-6 text-xs sm:text-sm md:text-base bg-gray-600 dark:bg-neutral-700 text-white font-extrabold uppercase tracking-tight hover:bg-gray-700 dark:hover:bg-neutral-600 transition whitespace-nowrap rounded">
									Logout
								</button>
								<!-- Delete account button -->
								<button command="show-modal" commandfor="delete-dialog" class="h-10 flex items-center justify-center px-3 sm:px-6 text-xs sm:text-sm md:text-base bg-red-500 text-white font-extrabold uppercase tracking-tight hover:brightness-90 transition whitespace-nowrap rounded">
										<span data-i18n="content.profileDelete"></span>
								</button>

								<!-- Language selector -->
								<!-- language selector removed from profile-template (moved to header) -->

								<!-- 2FA toggle -->
								<div class="flex items-center gap-2">
									<input id="input-lock" type="checkbox" class="hidden peer">
									<label
										for="input-lock"
										class="btn-lock group inline-flex items-center h-10 px-4 bg-red-600 dark:bg-red-700 font-extrabold text-white uppercase tracking-tight text-sm cursor-pointer select-none transition-all duration-300 hover:brightness-110 peer-checked:bg-accent-orange dark:peer-checked:bg-accent-green peer-checked:text-black dark:peer-checked:text-black rounded">
										<svg viewBox="0 0 30 40" class="h-5 mr-2" style="transform-origin: center;" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
											<path class="lockb" d="M27 27C27 34.1797 21.1797 40 14 40C6.8203 40 1 34.1797 1 27C1 19.8203 6.8203 14 14 14C21.1797 14 27 19.8203 27 27ZM15.6298 26.5191C16.4544 25.9845 17 25.056 17 24C17 22.3431 15.6569 21 14 21C12.3431 21 11 22.3431 11 24C11 25.056 11.5456 25.9845 12.3702 26.5191L11 32H17L15.6298 26.5191Z" fill="currentColor" stroke="none" />
											<path class="lock" d="M6 21V10C6 5.58172 9.58172 2 14 2V2C18.4183 2 22 5.58172 22 10V21" fill="none" stroke="currentColor" />
										</svg>
										<span id="profile-tfa" class="whitespace-nowrap">2FA</span>
									</label>
								</div>
							</div>
						</div>
					</div>

					<!-- Charts Section -->
					<div id="profile-charts-section" class="flex flex-col gap-6 p-4 border-t border-accent-orange dark:border-accent-green">
						<!-- Dynamically populated stats will go here -->
					</div>
				</div>
			</div>
		</div>
	</template>

	<!-- Search Profile -->
	<template id="search-profile-card-template">
		<div class="w-full cards flex items-center justify-center gap-10 rounded-xl search-profile-card pb-96 -mt-20" style="padding-top: 0px;">
			<div class="card shadow-[10px_10px_0_0_#ff6b35] dark:shadow-[10px_10px_0_0_#0dff66] overflow-hidden rounded-xl hover:shadow-lg dark:hover:shadow-lg dark:hover:brightness-90 hover:brightness-105 transition-all duration-300" style="transform: scale(0.8);">
				<div class="pt-4 px-4 pb-1 w-full flex flex-col gap-0">
					<!-- Header with avatar and info -->
					<div class="flex flex-col md:flex-row items-start gap-4 sm:gap-6 md:gap-8 mb-8">
						<!-- Avatar -->
						<div class="relative flex-shrink-0 z-30">
							<div class="relative w-24 h-24 sm:w-32 sm:h-32 md:w-40 md:h-40 aspect-square rounded-md overflow-hidden border-4 border-gray-400 dark:border-neutral-400 flex items-center justify-center bg-gray-200 dark:bg-neutral-800">
								<img class="spc-avatar w-full h-full object-cover" src="/assets/placeholder-avatar.jpg" alt="User avatar" />
							</div>
						</div>

						<!-- User info section -->
						<div class="flex-1 w-full z-30 min-w-0">
							<!-- Username -->
							<h1 class="spc-username text-2xl sm:text-3xl md:text-4xl font-extrabold tracking-tight text-accent-orange dark:text-accent-green mb-4 sm:mb-6 capitalize">Username</h1>
							
							<!-- Email -->
							<div class="flex flex-wrap gap-x-8 gap-y-2 mb-4 sm:mb-6 text-sm sm:text-base md:text-lg">
								<div class="flex items-center gap-2">
									<span class="font-extrabold text-black dark:text-white">Email:</span> 
									<span class="spc-email text-gray-600 dark:text-neutral-400">email@example.com</span>
								</div>
							</div>

							<!-- Action buttons -->
							<div class="flex flex-wrap gap-2 sm:gap-3 items-center">
								<button class="h-10 flex items-center justify-center px-3 sm:px-6 text-xs sm:text-sm md:text-base font-extrabold uppercase tracking-tight whitespace-nowrap rounded transition-all duration-200 spc-chat bg-accent-blue dark:bg-accent-blue text-white dark:text-white hover:brightness-90 dark:hover:brightness-110 active:brightness-75 disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:brightness-100 dark:disabled:hover:brightness-100">
									ðŸ’¬ Send Message
								</button>
								<button class="h-10 flex items-center justify-center px-3 sm:px-6 text-xs sm:text-sm md:text-base font-extrabold uppercase tracking-tight whitespace-nowrap rounded transition-all duration-200 spc-add bg-gray-500 dark:bg-accent-green text-white dark:text-white hover:brightness-90 dark:hover:brightness-110 active:brightness-75 disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:brightness-100 dark:disabled:hover:brightness-100">
									ðŸ‘¥ Add Friend
								</button>
								<button class="h-10 flex items-center justify-center px-3 sm:px-6 text-xs sm:text-sm md:text-base font-extrabold uppercase tracking-tight whitespace-nowrap rounded transition-all duration-200 spc-block bg-red-600 dark:bg-red-700 text-white hover:brightness-90 dark:hover:brightness-110 active:brightness-75 disabled:opacity-60 disabled:cursor-not-allowed disabled:hover:brightness-100 dark:disabled:hover:brightness-100">
									ðŸ”’ Block
								</button>
							</div>
						</div>
					</div>

					<!-- Charts Section -->
					<div id="search-profile-charts-section" class="flex flex-col gap-6 p-4 border-t border-accent-orange dark:border-accent-green">
						<!-- Dynamically populated stats will go here -->
					</div>
				</div>
			</div>
		</div>
	</template>

	<!-- Delete Account Dialog -->
	<div id="delete-dialog"
		tabindex="-1"
		class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/50">
		<div class="relative p-4 w-full max-w-lg">
			<div class="relative bg-neutral-900 border border-neutral-700 rounded-xl pb-6 
						shadow-[10px_10px_0_0_#f73c3c] transition-all duration-[0.4s] hover:shadow-lg
						outline -outline-offset-1 outline-white/10">
				<div class="bg-neutral-900 px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
					<div class="sm:flex sm:items-start">
						<div class="mx-auto flex size-12 shrink-0 items-center justify-center rounded-full bg-red-500/10 sm:mx-0 sm:size-10">
							<svg viewBox="0 0 24 24" fill="none" data-slot="icon" aria-hidden="true" class="size-6 text-red-400">
								<path d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z" stroke-linecap="round" stroke-linejoin="round" />
							</svg>
						</div>
						<div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
							<h3 id="dialog-title" class="text-base font-semibold text-white">Delete account</h3>
							<div class="mt-2">
								<p class="text-sm text-gray-400">Are you sure you want to delete your account? All of your data will be permanently removed. This action cannot be undone.</p>
							</div>
						</div>
					</div>
				</div>
				<div class="bg-gray-800/25 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
					<button type="button" id="confirm-delete-btn" class="inline-flex w-full justify-center rounded-md bg-red-500 px-3 py-2 text-sm font-semibold text-white hover:bg-red-400 sm:ml-3 sm:w-auto">Delete</button>
					<button type="button" id="cancel-delete-btn" class="mt-3 inline-flex w-full justify-center rounded-md bg-white/10 px-3 py-2 text-sm font-semibold text-white inset-ring inset-ring-white/5 hover:bg-white/20 sm:mt-0 sm:w-auto">Cancel</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Home Template -->
	<template id="home-template">
		<!-- Main Title Section - FT/ aligned right -->
		<section class="font-extrabold tracking-tighter h-max leading-[0.8] text-gray-800 dark:text-gray-100 p-2 sm:p-4 flex items-center justify-start" >
			<div class="text-left">
				<h1 class="text-[7vw] uppercase mb-2">
					FT/<br />TRASCENDENCE
				</h1>
				<p class="relative p-2 md:text-2xl sm:text-sm tracking-wid text-center font-bold px-4" data-i18n="site.subtitle">
				</p>
			</div>
		</section>

		<div class="w-full relative min-h-[60vh] flex flex-col lg:flex-row items-center lg:items-start 
            justify-center lg:justify-between px-[12vw] py-8 gap-12">
			<!-- Slideshow Wrapper -->
			<div class="flex-shrink-0">
				<div class="card relative flex items-center justify-center group shadow-[10px_10px_0_0_#ff9d00] dark:shadow-[10px_10px_0_0_#0dff66] hover:shadow-lg dark:hover:shadow-lg hover:brightness-90 dark:hover:brightness-110 transition-all duration-300 rounded-none dark:rounded-xl">
				<!-- Previous Button -->
				<button id="slideshow-prev-btn" type="button" aria-label="Previous slide"
				class="absolute top-1/2 -translate-y-1/2 p-2 sm:p-3 dark:bg-accent-pink bg-accent-blue text-black dark:text-white 
					font-extrabold shadow-md hover:brightness-110 active:scale-95 transition-all rounded-full w-8 h-8 sm:w-12 sm:h-12 flex items-center justify-center cursor-pointer pointer-events-auto"
				style="z-index: 900; left: -3rem;">
					<svg class="w-4 h-4 sm:w-6 sm:h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
					</svg>
				</button>

				<!-- Slides Container -->
				<div id="slides-view-port" class="relative w-[30vh] sm:w-[40vh] overflow-visible">
					<!-- CARD PONG -->
					<div id="pong-card-wrapper" class="hidden">
						<button id="pong-card-btn" class="p-8 sm:p-10 w-full
						border-neutral-300 accent-accent-blue overflow-hidden
						transition-all duration-300 cursor-pointer block text-left
						slideshow-slide rounded">
							<h3 class="text-3xl font-extrabold mb-6 uppercase tracking-tight text-accent-orange dark:text-accent-pink text-center hover:underline scale-105 duration-300" data-i18n="site.play-pong">
							</h3>
							<div class="w-full aspect-square relative border-4 border-double dark:border-white border-black mx-auto">
								<div class="absolute top-0 left-1/2 -translate-x-1/2 w-0 h-full border-dotted border-r-2 dark:border-white border-black"></div>
								<div class="absolute left-[6%] w-[0.3vw] h-[1.2vw] dark:bg-white bg-black animate-[ping_6s_linear_infinite]"></div>
								<div class="absolute right-[6%] w-[0.3vw] h-[1.2vw] dark:bg-white bg-black animate-[pong_6s_linear_infinite]"></div>
								<div class="absolute w-[0.4vw] h-[0.4vw] dark:bg-white bg-black animate-[ball_6s_linear_infinite]"></div>
							</div>
						</button>
					</div>

					<!-- Tic tac toe -->
					<div id="tris-card-wrapper">
						<button id="tris-card-btn" class="p-8 sm:p-10 w-full
						dark:border-neutral-700 border-neutral-300 overflow-hidden transition-all duration-300 cursor-pointer block text-left
						slideshow-slide rounded">
							<h3 class="text-3xl font-extrabold mb-6 uppercase tracking-tight text-accent-orange dark:text-accent-pink text-center hover:underline scale-105 duration-300" data-i18n="site.play-tris">
							</h3>
							<div class="relative w-full aspect-square border-4 border-double dark:border-white border-black mx-auto overflow-hidden pointer-events-none">
								<!-- Vertical grid lines -->
								<div class="absolute left-1/3 top-0 w-[2px] h-full dark:bg-white bg-black animate-grid-v"></div>
								<div class="absolute left-2/3 top-0 w-[2px] h-full dark:bg-white bg-black animate-grid-v" style="animation-delay: 0.2s;"></div>

								<!-- Horizontal grid lines -->
								<div class="absolute top-1/3 left-0 h-[2px] w-full dark:bg-white bg-black animate-grid-h"></div>
								<div class="absolute top-2/3 left-0 h-[2px] w-full dark:bg-white bg-black animate-grid-h" style="animation-delay: 0.2s;"></div>

								<!-- X -->
								<div class="absolute inset-0 animate-x">
									<div class="absolute top-[40%] left-[40%] w-[30%] h-[2px] dark:bg-white bg-black rotate-45 origin-left"></div>
									<div class="absolute top-[60%] left-[40%] w-[30%] h-[2px] dark:bg-white bg-black -rotate-45 origin-left"></div>
								</div>

								<!-- O -->
								<div class="absolute inset-0 animate-o">
									<div class="absolute top-[40%] left-[40%] w-[20%] h-[20%] rounded-full border-2 border-black dark:border-white"></div>
								</div>
							</div>
						</button>
					</div>
				</div>

				<!-- Next Button -->
				<button id="slideshow-next-btn" type="button" aria-label="Next slide"
				class="absolute top-1/2 -translate-y-1/2 p-2 sm:p-3 dark:bg-accent-pink bg-accent-blue text-black dark:text-white 
					font-extrabold shadow-md active:scale-95 transition-all rounded-full w-8 h-8 sm:w-12 sm:h-12 flex items-center justify-center cursor-pointer pointer-events-auto"
				style="z-index: 61; right: -3rem;">
					<svg class="w-4 h-4 sm:w-6 sm:h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
					</svg>
				</button>
			</div>
			</div>

			<!-- Home Info Card -->
			<div class="flex-shrink-0">
				<div id="home-info"
					class="card shadow-[10px_10px_0_0_#ff9d00] overflow-hidden rounded-xl
					dark:shadow-[10px_10px_0_0_#0dff66] hover:shadow-lg dark:hover:shadow-lg hover:brightness-110 transition-all duration-300 w-96">
				<div class="flex w-full flex-col items-start gap-6 p-8">
					<img src="./42_Logo.svg" alt="42 Logo"
						class="w-48 h-48 flex-shrink-0 dark:invert self-center" />
					<div class="flex flex-col space-y-6 w-full">
						<a href="https://localhost:3000/docs">
							<h2 class="text-2xl font-bold underline underline-offset-auto tracking-tighter uppercase hover:text-white hover:bg-black dark:hover:bg-white dark:hover:text-black" data-i18n="site.documentation"></h2>
						</a>
						<a href="/assets/subject.pdf" target="_blank">
							<h2 class="text-2xl font-bold underline underline-offset-auto tracking-tighter uppercase hover:text-white hover:bg-black dark:hover:bg-white dark:hover:text-black" data-i18n="site.subject"></h2>
						</a>
						<a href="/login" id="cta-login-logout">
							<h2 class="text-2xl font-bold underline underline-offset-auto tracking-tighter uppercase hover:text-white hover:bg-black dark:hover:bg-white dark:hover:text-black" data-i18n="site.login"></h2>
						</a>
					</div>
				</div>
			</div>
		</div>

		</div>
	</template>

	<!-- Pong Page template -->
	<template id="pong-template">
	<div class=" min-h-screen">
		<div class="mx-auto max-w-7xl px-6 pt-[2vw] cards">

		<!-- Seamless Bento Wrapper -->
		<div class="card border border-gray-300 dark:border-neutral-800 rounded-2xl overflow-hidden bg-white dark:bg-neutral-900 p-6
					shadow-[10px_10px_0_0_#ff6b35] dark:shadow-[10px_10px_0_0_#0dff66] 
					hover:shadow-lg dark:hover:shadow-lg dark:hover:brightness-110 hover:brightness-105 transition-all duration-300">

					
			<div class="grid lg:grid-cols-3 lg:grid-rows-2 gap-4 items-stretch">

			<!-- LEFT LARGE (row-span-2) -->
			<div class="lg:row-span-2 h-full border border-gray-300 dark:border-neutral-800 rounded-2xl p-6 flex flex-col bg-gray-100 dark:bg-neutral-800 bg-opacity-50 dark:bg-opacity-40">
				<h2 class="text-lg font-semibold text-gray-900 dark:text-white">
				Play Online
				</h2>
				<p class="mt-2 text-sm text-gray-600 dark:text-neutral-400">
				Match with players in real time and climb the leaderboard.
				</p>

				<div class="mt-auto pt-20">
				<button id="pong-play-online"
					class="capitalize tracking-wider font-bold w-full rounded-xl bg-black text-white dark:bg-white dark:text-black py-2 text-5 hover:bg-opacity-90 dark:hover:bg-neutral-200 transition">
						 Start Matchmaking
				</button>
				</div>
			</div>

			<!-- TOP MIDDLE -->
			<div class="border border-gray-300 dark:border-neutral-800 rounded-2xl p-6 flex flex-col bg-gray-100 dark:bg-neutral-800 bg-opacity-50 dark:bg-opacity-40">
				<h3 class="text-lg font-semibold text-gray-900 dark:text-white">
				Offline Modes
				</h3>

				<div class="mt-4 flex flex-col gap-3">
				<button id="pong-play-offline-1v1"
					class="rounded-lg bg-gray-200 dark:bg-neutral-800 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-300 dark:hover:bg-neutral-700 transition">
					ðŸ‘¥ Local 1v1
				</button>

				<button id="pong-play-offline-ai"
					class="rounded-lg bg-gray-200 dark:bg-neutral-800 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-300 dark:hover:bg-neutral-700 transition">
					ðŸ¤– Play vs AI
				</button>
				</div>
			</div>

			<!-- RIGHT LARGE -->
			<div class="lg:row-span-2 h-full border border-gray-300 dark:border-neutral-800 rounded-2xl p-6 flex flex-col bg-gray-100 dark:bg-neutral-800 bg-opacity-50 dark:bg-opacity-40">
				<h2 class="text-lg font-semibold text-gray-900 dark:text-white">
				Play in a Tournament
				</h2>
				<p class="mt-2 text-sm text-gray-600 dark:text-neutral-400">
				Rise to the top by competing in ranked matches and tournaments against players worldwide.
				</p>

				<div class="mt-4 flex items-center gap-3"
				id="tournament-list">
					<!-- Dynamically populated list of tournaments will go here -->
				</div>

				<div class="mt-auto pt-20">
				<button id="tournament-btn"
					class="capitalize tracking-wider font-bold w-full rounded-xl bg-black text-white dark:bg-white dark:text-black py-2 text-5 hover:bg-opacity-90 dark:hover:bg-neutral-200 transition">
						 Create tournament
				</button>
				</div>
			</div>

			<!-- BOTTOM MIDDLE -->
			<div class="lg:row-span-2 border border-gray-300 dark:border-neutral-800 rounded-2xl p-6 flex flex-col bg-gray-100 dark:bg-neutral-800 bg-opacity-50 dark:bg-opacity-40">
				<h2 class="text-lg font-semibold text-gray-900 dark:text-white">
				Your Stats
				</h2>

				<div class="mt-4 flex items-center justify-between">
				<div class="text-gray-600 dark:text-neutral-400 space-y-1 text-sm">
					<div id="pong-user-wins">Wins: 0</div>
					<div id="pong-user-losses">Losses: 0</div>
				</div>

				<div id="pong-user-chart" class="w-16 h-16">
					<div id="pong-user-chart-inner" class="w-full h-full"></div>
				</div>
				</div>

				<div class="mt-5 border-t border-gray-300 dark:border-neutral-800 pt-4 flex flex-col gap-3">
				<button id="pong-invite-friend"
					class="rounded-lg bg-gray-200 dark:bg-neutral-800 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-300 dark:hover:bg-neutral-700 transition">
					ðŸ‘¥ Invite Friend
				</button>

				</div>
			</div>

			</div>
		</div>

		</div>
	</div>
	</template>

	<div id="tournament-modal" tabindex="-1" class="hidden flex overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 rounded-xl justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full bg-black/50 backdrop-blur-sm">
		<div class="relative p-4 w-full max-w-6xl max-h-full">
			<div class="relative bg-white dark:bg-gray-900 rounded-2xl overflow-hidden shadow-[10px_10px_0_0_#ff6b35] dark:shadow-[10px_10px_0_0_#0dff66] border-4 border-gray-800 dark:border-gray-700 transition-all duration-300 h-[85vh] flex flex-col md:flex-row">

				<button type="button" id="lobby-close-btn" class="absolute top-4 right-4 z-50 text-black dark:text-white bg-white dark:bg-gray-800 border-2
				 border-gray-800 dark:border-gray-300 hover:bg-accent-orange dark:hover:bg-accent-green rounded-lg text-sm w-10 h-10 inline-flex justify-center 
				 items-center transition-all active:translate-x-1 active:translate-y-1"
				 title="Close lobby">
					<svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
						<path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
					</svg>
				</button>

				<div class="w-full md:w-80 bg-gray-100 dark:bg-gray-800 border-r-4 border-gray-800 dark:border-gray-700 flex flex-col">
					<div class="p-5 border-b-4 border-gray-800 dark:border-gray-700 bg-accent-orange dark:bg-accent-green">
						<h3 class="text-xl font-black text-black uppercase tracking-tighter italic">Lobby Players</h3>
						<div class="flex justify-between items-center mt-1">
							<span class="text-xs font-bold uppercase text-black/70">Slot: 12/16</span>
							<span class="text-xs font-bold uppercase bg-black text-white px-2 py-0.5 rounded">Public</span>
						</div>
					</div>
					
					<div id="player-list" class="flex-1 overflow-y-auto p-4 space-y-3">
						<div class="flex items-center p-3 gap-3 bg-white dark:bg-gray-700 border-2 border-gray-800 dark:border-gray-300 shadow-[4px_4px_0_0_#000] dark:shadow-[4px_4px_0_0_#0dff66] rounded-xl">
							<div class="relative">
								<div class="w-10 h-10 rounded-lg bg-blue-400 border-2 border-gray-800 flex items-center justify-center font-black">P1</div>
								<div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 border-2 border-gray-800 rounded-full"></div>
							</div>
							<div class="flex-1 min-w-0">
								<div class="font-black text-black dark:text-white text-sm truncate uppercase">Viper_Striker</div>
								<div class="text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest">Rank: Diamond</div>
							</div>
						</div>

						<div class="flex items-center p-3 gap-3 border-2 border-dashed border-gray-400 dark:border-gray-600 rounded-xl opacity-60">
							<div class="w-10 h-10 rounded-lg bg-gray-200 dark:bg-gray-800 border-2 border-gray-400 dark:border-gray-600"></div>
							<div class="font-bold text-gray-400 dark:text-gray-500 uppercase text-xs italic italic">Waiting for player...</div>
						</div>
					</div>

					<div class="p-4 bg-white dark:bg-gray-900 border-t-4 border-gray-800 dark:border-gray-700">
						<button class="w-full py-3 bg-white dark:bg-gray-800 border-2 border-gray-800 dark:border-gray-300 text-black dark:text-white font-black uppercase tracking-tighter hover:bg-gray-100 dark:hover:bg-gray-700 transition-all shadow-[4px_4px_0_0_#000] dark:shadow-[4px_4px_0_0_#0dff66] active:shadow-none active:translate-x-1 active:translate-y-1">
							Invite Friends
						</button>
					</div>
				</div>

				<div class="flex-1 flex flex-col bg-white dark:bg-gray-900 overflow-hidden">
					<div class="p-6 border-b-4 border-gray-800 dark:border-gray-700 flex flex-col md:flex-row md:items-center justify-between gap-4">
						<div>
							<h2 class="text-3xl font-black text-black dark:text-white uppercase tracking-tighter">Grand Finals Analytics</h2>
							<p class="text-sm font-bold text-gray-500 dark:text-accent-green uppercase tracking-widest">Match ID: #TRN-9920</p>
						</div>
						<div class="flex items-center gap-3">
							<div class="text-right hidden sm:block">
								<p class="text-[10px] font-black uppercase text-gray-400">Prize Pool</p>
								<p class="text-xl font-black text-black dark:text-white">$2,500.00</p>
							</div>
							<button class="bg-accent-orange dark:bg-accent-green text-black px-6 py-2 rounded-lg border-2 border-gray-800 font-black uppercase shadow-[4px_4px_0_0_#000] hover:brightness-110 active:shadow-none active:translate-x-1 active:translate-y-1 transition-all">
								Ready Up
							</button>
						</div>
					</div>

					<div class="flex-1 p-6 overflow-y-auto">
						<div class="grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6">
							<div class="lg:col-span-3 bg-gray-50 dark:bg-gray-800/50 border-2 border-gray-800 dark:border-gray-700 rounded-2xl p-4">
								<div class="flex items-center justify-between mb-4">
									<h4 class="font-black uppercase text-gray-800 dark:text-gray-200">Win Probability Over Time</h4>
									<span class="text-[10px] font-bold py-1 px-2 bg-red-500 text-white rounded uppercase">Live Feed</span>
								</div>
								
								<div id="tournament-chart" class="w-full h-80 bg-white dark:bg-gray-900 border-2 border-gray-800 dark:border-gray-700 rounded-xl flex items-center justify-center">
									<p class="text-gray-400 font-bold italic uppercase">Apex Chart Initializing...</p>
								</div>
							</div>

							<div class="flex flex-col gap-4">
								<div class="flex-1 bg-white dark:bg-gray-800 border-2 border-gray-800 dark:border-gray-700 rounded-2xl p-4 shadow-[4px_4px_0_0_#000] dark:shadow-[4px_4px_0_0_#ff6b35]">
									<h5 class="text-[10px] font-black uppercase text-gray-500 mb-1">Top Performer</h5>
									<p class="font-black text-lg dark:text-white truncate">Ghost_X</p>
									<div class="mt-2 h-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
										<div class="h-full bg-accent-orange" style="width: 85%"></div>
									</div>
								</div>
								<div class="flex-1 bg-white dark:bg-gray-800 border-2 border-gray-800 dark:border-gray-700 rounded-2xl p-4 shadow-[4px_4px_0_0_#000] dark:shadow-[4px_4px_0_0_#0dff66]">
									<h5 class="text-[10px] font-black uppercase text-gray-500 mb-1">Avg Kill Rate</h5>
									<p class="font-black text-lg dark:text-white">4.2 K/D</p>
									<div class="mt-2 h-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
										<div class="h-full bg-accent-green" style="width: 62%"></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>

	<!-- Pong Game Modal -->
	<div id="pong-modal"
		tabindex="-1" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-30 justify-center items-center w-full md:inset-0 h-full max-h-full p-4">
		<div class="relative z-50 w-full max-w-4xl">
			<div class="relative dark:bg-neutral-900 bg-white/80 backdrop-blur-sm rounded-xl border-4 dark:border-neutral-700 border-neutral-50 dark:shadow-[15px_15px_0_0_rgba(255,0,157,0.3)] shadow-[15px_15px_0_0_rgba(0,168,232,0.3)] overflow-hidden flex flex-col">

				<!-- Close button -->
				<button id="pong-close-btn" class="absolute top-4 text-accent-orange right-4 z-10 w-8 h-8 inline-flex justify-center items-center rounded-md border-2 dark:border-neutral-700 border-accent-orange dark:bg-neutral-800 hover:bg-neutral-300 dark:hover:bg-neutral-700 transition">âœ•</button>

				<!-- Header -->
				<div class="p-6 border-b-2 flex-none dark:border-neutral-700 border-accent-orange dark:bg-gradient-to-r dark:from-neutral-800 dark:to-neutral-900 bg-gradient-to-r from-neutral-100 to-neutral-300">
					<div class="flex items-center gap-3">
						<h2 class="text-3xl font-extrabold uppercase tracking-tight dark:text-accent-pink text-accent-orange">Pong</h2>
						<span id="pong-game-id" class="text-sm dark:text-neutral-400 text-neutral-600 font-mono px-3 py-1 dark:bg-neutral-700/50 bg-neutral-200/50 rounded-lg"></span>
					</div>
				</div>

				<!-- Main Content (Canvas + Score) -->
				<div class="px-8 pt-4 pb-4 flex flex-col gap-6 max-h-[calc(100vh-300px)] min-h-0">

					<div class="flex-1 flex flex-col rounded-lg overflow-hidden dark:border-red-700 shadow-lg min-h-0">
						<!-- Names and center score bar (placed before the canvas) -->
						<div id="pong-scorebar" class="flex-shrink-0 sticky top-0 z-20 w-full flex items-center px-4 py-2 relative border-b-2 dark:border-neutral-700 border-neutral-300 h-12">
							<div id="pong-left-name" class="text-heading font-semibold text-sm flex-1 text-left flex items-center gap-2">
								<span>Player 1</span>
								<span id="pong-left-ready" class="text-lg hidden dark:text-accent-green text-accent-blue">âœ“</span>
							</div>
							<div id="pong-center-score" class="text-heading font-extrabold text-lg absolute left-1/2 transform -translate-x-1/2">0 - 0</div>
							<div id="pong-right-name" class="text-heading font-semibold text-sm flex-1 text-right flex items-center justify-end gap-2">
								<span id="pong-right-ready" class="text-lg hidden dark:text-accent-green text-accent-blue">âœ“</span>
								<span>Player 2</span>
							</div>
						</div>

						<!-- Game Canvas -->
						<canvas id="pong-canvas" tabindex="-1" class="flex-1 w-full block"></canvas>
					</div>

					<!-- Status Card -->
					<div id="pong-status" class="text-center p-4 bg-gradient-to-l from-neutral-200 to-neutral-300 dark:from-neutral-800 dark:to-neutral-900 rounded-lg border-2 dark:border-neutral-700 border-neutral-200 text-black dark:text-white font-semibold uppercase tracking-wide">Connecting...</div>

					<!-- Controls Card -->
					<div class="flex gap-3 justify-center flex-wrap">
						<button id="pong-ready-btn" class="px-6 py-3 dark:bg-accent-orange bg-accent-orange text-white font-extrabold uppercase tracking-tight rounded-lg hover:brightness-110 transition hidden">âœ“ Ready</button>
						<button id="pong-btn" class="px-6 py-3 dark:bg-accent-green bg-accent-blue text-white font-extrabold uppercase tracking-tight rounded-lg hover:brightness-110 transition">Start</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Tris Page template -->
	<template id="tris-template">
		<div class="cards min-h-screen p-6 md:p-8">
			<!-- Header Card -->
			<div class="max-w-5xl mx-auto mb-8">
				<div class="bg-gradient-to-r dark:from-neutral-800 dark:to-neutral-900 from-neutral-100 to-neutral-50 rounded-xl border-4 dark:border-neutral-700 border-neutral-300 p-6 dark:shadow-[10px_10px_0_0_rgba(255,0,157,0.2)] shadow-[10px_10px_0_0_rgba(0,168,232,0.2)]">
					<div class="card flex items-center justify-between">
						<div>
							<h1 class="text-4xl md:text-5xl font-extrabold uppercase tracking-tight dark:text-accent-pink text-accent-orange mb-2">Tris</h1>
							<p class="text-sm text-neutral-600 dark:text-neutral-400">Tic-Tac-Toe game</p>
						</div>
						<div class="flex items-center gap-4 p-4 dark:bg-neutral-700/50 bg-neutral-200/50 rounded-lg">
							<div class="text-right text-sm">
								<!-- <div id="tris-username" class="font-bold">Username</div> -->
								<div id="tris-user-stats" class="flex flex-col items-end text-xs text-neutral-600 dark:text-neutral-400">
									<div id="tris-user-wins">Wins: 0</div>
									<div id="tris-user-losses">Losses: 0</div>
								</div>
							</div>
							<div id="tris-user-chart" class="w-14 h-14 flex items-center justify-center bg-transparent">
								<div id="tris-user-chart-inner" class="w-full h-full"></div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Content Grid -->
			<div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6">
				<!-- Main Play Card -->
				<div class="md:col-span-2">
					<div class="bg-white/80 dark:bg-neutral-800/80 backdrop-blur-sm rounded-xl border-3 dark:border-neutral-700 border-neutral-300 overflow-hidden dark:shadow-lg shadow-md">
						<div class="bg-gradient-to-r dark:from-accent-pink/20 dark:to-accent-pink/10 from-accent-orange/20 to-accent-orange/10 p-6 border-b-2 dark:border-neutral-700 border-neutral-300">
							<h2 class="text-2xl font-extrabold uppercase tracking-tight dark:text-accent-pink text-accent-orange">Play Game</h2>
						</div>
						<div class="p-6 space-y-3">
							<button id="tris-play-online" class="w-full btn-primary">ðŸŽ® Play Online (Matchmaking)</button>
							<button id="tris-play-offline-1v1" class="w-full btn-muted">ðŸ‘¥ Offline 1v1 (Local)</button>
							<button id="tris-play-offline-ai" class="w-full btn-muted">ðŸ¤– Play vs AI</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</template>

	<!-- Tris Game Modal (styled like Pong modal) -->
	<div id="tris-modal" tabindex="-1" data-backdrop-close="false" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-30 justify-center items-center w-full md:inset-0 h-full max-h-full p-4">
		<div class="relative z-50 w-full max-w-4xl">
			<div class="relative dark:bg-neutral-900 bg-white/80 backdrop-blur-sm rounded-xl border-4 dark:border-neutral-700 border-neutral-50 dark:shadow-[15px_15px_0_0_rgba(255,0,157,0.3)] shadow-[15px_15px_0_0_rgba(0,168,232,0.3)] overflow-hidden flex flex-col">

				<!-- Close button (match Pong styling) -->
				<button id="tris-close-btn" class="absolute top-4 text-accent-orange right-4 z-10 w-8 h-8 inline-flex justify-center items-center rounded-md border-2 dark:border-neutral-700 border-accent-orange dark:bg-neutral-800 hover:bg-neutral-300 dark:hover:bg-neutral-700 transition">âœ•</button>

				<!-- Header -->
				<div class="p-3 border-b-2 dark:border-neutral-700 border-accent-orange dark:bg-gradient-to-r dark:from-neutral-800 dark:to-neutral-900 bg-gradient-to-r from-neutral-100 to-neutral-300">
					<div class="flex items-center gap-3">
						<h2 class="text-2xl font-extrabold uppercase tracking-tight dark:text-accent-pink text-accent-orange">Tris</h2>
						<span id="tris-game-id" class="text-xs dark:text-neutral-400 text-neutral-600 font-mono px-2 py-1 dark:bg-neutral-700/50 bg-neutral-200/50 rounded-lg"></span>
					</div>
				</div>

				<!-- Main Content -->
				<div class="px-4 py-3 flex flex-col gap-3 max-h-[calc(100vh-200px)] min-h-0">

					<div class="flex-1 flex flex-col rounded-lg overflow-hidden dark:border-red-700 shadow-lg min-h-0">
						<div class="flex-shrink-0 sticky top-0 z-20 w-full flex items-center px-4 py-1 relative border-b-2 dark:border-neutral-700 border-neutral-300">
							<div id="tris-left-name" class="text-heading font-semibold text-xs flex-1 text-left">Player X</div>
							<div id="tris-right-name" class="text-heading font-semibold text-xs flex-1 text-right">Player O</div>
						</div>

						<!-- Game board -->
						<div class="flex-1 flex items-center justify-center p-2 min-h-0 overflow-hidden">
							<div id="tris-board" class="grid grid-cols-3 gap-2 rounded-lg w-full max-w-[220px] sm:max-w-[300px] md:max-w-[350px] aspect-square">
								<!-- Cells will be generated by JS -->
							</div>
						</div>
					</div>

					<!-- Status Card -->
					<div id="tris-status" class="text-center p-2 bg-gradient-to-l from-neutral-200 to-neutral-300 dark:from-neutral-800 dark:to-neutral-900 rounded-lg border-2 dark:border-neutral-700 border-neutral-200 text-black dark:text-white font-semibold uppercase tracking-wide text-xs">Connecting...</div>

					<!-- Controls Card -->
					<div class="flex gap-2 justify-center flex-wrap">
						<button id="tris-start-btn" class="px-4 py-2 dark:bg-accent-green bg-accent-blue dark:text-black text-black font-extrabold uppercase tracking-tight hover:brightness-110 transition rounded-lg text-sm">Start</button>
					</div>

					<div id="tris-error" class="text-red-500 text-sm text-center hidden"></div>
				</div>
			</div>
		</div>
	</div>

	<!-- Generic Game Invite Modal (used by Tris and Pong) -->
	<div id="game-invite-modal"
	tabindex="-1"
	class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-30 
			flex justify-center items-center w-full md:inset-0 h-full max-h-full"
	>
	<div class="relative p-4 w-full max-w-md max-h-full">
		<div class="relative dark:bg-neutral-900 bg-neutral-100 border-4 dark:border-neutral-700 border-neutral-300 
		dark:shadow-[10px_10px_0_0_#00ffff] shadow-[10px_10px_0_0_#ff6b35] h-auto flex flex-col">

		<!-- Close button -->
		<button
			title="close"
			type="button"
			class="absolute top-4 right-4 z-50 dark:text-white text-black bg-transparent 
				dark:hover:bg-neutral-800 hover:bg-neutral-200 hover:text-white transition border-2 dark:border-neutral-700 border-neutral-300
				w-8 h-8 inline-flex justify-center items-center"
			id="game-invite-close-btn"
		>
			<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
			<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
				d="M6 18L18 6M6 6l12 12"/>
			</svg>
		</button>

		<!-- Header -->
		<div class="p-6 border-b-2 dark:border-neutral-700 dark:bg-neutral-800 border-neutral-300 bg-neutral-200">
			<h2 id="game-invite-title" class="text-2xl font-extrabold uppercase tracking-tight dark:text-[#00ffff] text-accent-orange">Invite Friend</h2>
			<p id="game-invite-subtitle" class="dark:text-neutral-400 text-neutral-600 text-sm mt-2">Select a friend to invite</p>
		</div>

		<!-- Friends list -->
		<div id="game-invite-friends-list" class="p-6 flex flex-col gap-2 max-h-96 overflow-y-auto">
			<div class="dark:text-neutral-400 text-neutral-600 text-center py-4">Loading friends...</div>
		</div>
		</div>
	</div>
	</div>

	<!-- Chat Modal -->
	<div id="chat-modal"
		tabindex="-1"
		class="hidden flex overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 rounded-xl
					justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full bg-black/50"
	>
		<div class="relative p-4 w-full max-w-4xl max-h-full">
				<div class="relative bg-white dark:bg-gray-900 rounded-2xl overflow-hidden
							shadow-[10px_10px_0_0_#ff6b35] dark:shadow-[10px_10px_0_0_#0dff66] 
							hover:shadow-lg dark:hover:shadow-lg transition-all duration-300 h-[80vh] flex flex-col md:flex-row">

					<!-- Absolute close button in top-right corner -->
					<button
						type="button"
						id="chat-close-btn"
						class="absolute top-3 right-3 z-50 text-accent-orange dark:text-green-400 bg-transparent hover:bg-gray-300 hover:text-accent-orange dark:hover:bg-gray-600 dark:hover:text-accent-green rounded-lg text-sm w-9 h-9 inline-flex justify-center items-center transition-colors"
						title="Close chat"
					>
						<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
							<path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
						</svg>
						<span class="sr-only">Close modal</span>
					</button>



				<!-- Sidebar with chat list -->
				<div class="w-80 bg-gray-100 dark:bg-gray-800 rounded-l-2xl border-r-2 border-gray-800 dark:border-gray-300 flex flex-col">
					<div class="p-4 border-b-2 border-gray-800 dark:border-gray-300">
						<h3 class="text-lg font-bold text-black dark:text-white uppercase tracking-tight">Chats</h3>
						<button
							title="create group"
							id="create-group-btn"
							class="mt-3 w-full bg-accent-orange dark:bg-accent-green dark:text-black text-white px-4 py-2 rounded-xl font-extrabold text-sm 
									hover:brightness-110 dark:hover:brightness-110 transition-all duration-200 uppercase tracking-tight"
							data-i18n="chat.create-group">
						</button>
					</div>
					<div id="chat-list" class="flex-1 overflow-y-auto p-2 space-y-1">
						<!-- Chat items will be populated here -->
					</div>
				</div>

				<!-- Main chat area -->
				<div class="flex-1 flex flex-col bg-white dark:bg-gray-900 rounded-tr-2xl">
					<!-- Chat header -->
					<div class="p-2 border-b-2 rounded-tr-2xl border-gray-800 dark:border-gray-300 bg-gray-50 dark:bg-gray-800 flex items-center h-17">
						<div id="chat-header-actions" class="pr-4 flex flex-col items-center gap-2 flex-shrink-0">
							<button
								id="leave-group-btn"
								class="hidden w-8 h-8 flex items-center justify-center bg-red-500 dark:bg-red-600 hover:bg-red-600 dark:hover:bg-red-700 text-white rounded-md"
								title="Leave this group chat"
								aria-label="Leave group"
							>
								<svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
									<path d="M16 17l5-5-5-5" />
									<path d="M21 12H9" />
									<path d="M9 19H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h4" />
								</svg>
								<span class="sr-only" data-i18n="chat.leave"></span>
							</button>
							<!-- add-user-btn will be inserted here dynamically -->
						</div>
						<div class="flex-1 min-w-0">
							<div class="flex flex-col min-w-0">
								<h2 id="chat-header" class="text-xl font-bold text-black dark:text-white uppercase tracking-tight truncate" data-i18n="chat.select"></h2>
								<div id="chat-members" class="mt-1 text-sm text-neutral-500 dark:text-neutral-300 truncate"></div>
							</div>
						</div>
					</div>

					<!-- Messages container with load more button -->
					<div id="chat-messages-container" class="flex-1 overflow-y-auto p-4 space-y-3 bg-white dark:bg-gray-900 flex flex-col">
						<button id="load-more-btn" 
							class="btn mx-auto mb-4 px-4 py-2 bg-accent-orange dark:bg-accent-green text-black font-extrabold rounded-xl 
									hover:brightness-90 dark:hover:brightness-110 transition-all uppercase tracking-tight border-2 border-gray-800 dark:border-gray-300" 
							style="display: none;"
							data-i18n="chat.load-more">
						</button>
						<div id="chat-messages" class="space-y-3">
							<!-- Messages will be appended here -->
						</div>
					</div>

					<!-- Chat input -->
					<div class="p-4 border-t-2 border-gray-800 dark:border-gray-300 bg-gray-50 dark:bg-gray-800">
						<div class="flex gap-2">
							<input
								id="chat-input"
								type="text"
								class="flex-1 bg-white dark:bg-gray-700 text-black dark:text-white px-3 py-2 rounded-xl border-2 
										border-gray-800 dark:border-gray-300 focus:outline-none focus:ring-2 
										focus:ring-accent-orange dark:focus:ring-accent-green placeholder-gray-600 dark:placeholder-gray-400"
								placeholder="Type a message..."
							/>
							<button
								title="send message"
								id="chat-send-btn"
								class="bg-accent-orange dark:bg-accent-green text-white dark:text-black font-extrabold px-4 py-2 rounded-xl 
										hover:brightness-90 dark:hover:brightness-110 transition-all uppercase tracking-tight"
								data-i18n="chat.send">
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Friend Selection Modal for Group Creation -->
	<div id="friend-selection-modal"
	tabindex="-1"
	class="hidden flex overflow-y-auto overflow-x-hidden fixed top-0 right-0 z-50 
			justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full bg-black/50"
	>
		<div class="relative p-4 w-full max-w-2xl max-h-full">
			<div class="relative bg-white dark:bg-neutral-900 border-2 border-gray-200 dark:border-neutral-700 rounded-xl shadow-[10px_10px_0_0_#ff6b35] dark:shadow-[10px_10px_0_0_#0dff66] p-6">

		<!-- Close button -->
				<button
					type="button"
					class="absolute top-3 right-3 z-10 text-gray-600 bg-transparent 
								hover:bg-gray-200 dark:hover:bg-neutral-800 hover:text-black dark:hover:text-white rounded-lg text-sm 
								w-9 h-9 inline-flex justify-center items-center"
					id="friend-modal-close-btn"
				>
			<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
			<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
				d="M6 18L18 6M6 6l12 12"/>
			</svg>
			<span class="sr-only">Close modal</span>
		</button>

		<!-- Header -->
		<h2 class="text-2xl font-bold dark:text-white text-accent-orange mb-4" data-i18n="chat.create"></h2>
		<p class="text-neutral-400 mb-6" data-i18n="chat.select-group"></p>

		<!-- Group name input -->
		<div class="mb-6">
					<label for="group-name-input" class="block text-gray-800 dark:text-white font-semibold mb-2" data-i18n="chat.group-name"></label>
					<input
						title="group name"
						id="group-name-input"
						type="text"
						class="w-full bg-white dark:bg-neutral-700 text-black dark:text-white px-3 py-2 rounded-md border border-gray-300 dark:border-neutral-600 focus:outline-none focus:border-accent-orange dark:focus:border-accent-green"
						data-i18n-placeholder="chat.groupNamePlaceholder"
					/>
		</div>

		<!-- Friends list -->
				<div id="friends-list" class="border rounded-md p-4 mb-6 max-h-96 overflow-y-auto bg-white dark:bg-neutral-800 border-gray-200 dark:border-neutral-700">
					<div class="text-gray-600 dark:text-neutral-400 text-center">Loading friends...</div>
		</div>

		<!-- Selected friends display -->
				<div id="selected-friends" class="mb-6 p-3 bg-white dark:bg-neutral-800 rounded-md border border-gray-200 dark:border-neutral-700 min-h-12">
					<p class="text-sm text-gray-600 dark:text-neutral-400 mb-2" data-i18n="chat.selected-count"> <span id="selected-count">0</span></p>
			<div id="selected-friends-tags" class="flex flex-wrap gap-2">
			<!-- Selected friend tags will appear here -->
			</div>
		</div>

		<!-- Buttons -->
		<div class="flex gap-3 justify-end">
			<button
			id="friend-modal-cancel-btn"
						class="px-4 py-2 bg-white/10 dark:bg-neutral-700 text-black dark:text-white rounded-md hover:bg-gray-100 dark:hover:bg-neutral-600 transition"
			>
			Cancel
			</button>
			<button
			title="create group"
			id="create-group-submit-btn"
						class="px-4 py-2 bg-accent-orange dark:bg-accent-green text-white dark:text-black font-semibold rounded-md hover:brightness-90 transition disabled:opacity-50 disabled:cursor-not-allowed"
			disabled
				data-i18n="chat.create-group">
			</button>
		</div>

		</div>
	</div>
	</div>

	<script>
	document.addEventListener('DOMContentLoaded', () => {
		const modalSelector = '[id$="-modal"]';
		const modals = Array.from(document.querySelectorAll(modalSelector));

		modals.forEach(m => {
			try {
				if (m.parentElement !== document.body) document.body.appendChild(m);
				m.classList.add('fixed');
				m.style.position = 'fixed';
				m.style.inset = m.style.inset || '0';
				m.style.zIndex = '100000';

				if (!m.querySelector(':scope > .__auto_backdrop')) {
					const bd = document.createElement('div');
					bd.className = '__auto_backdrop';
					bd.setAttribute('aria-hidden', 'true');
					m.insertBefore(bd, m.firstChild);
					bd.addEventListener('click', () => {
						if (m.dataset.backdropClose === 'false') return;
						m.classList.add('hidden');
					});
				}

				Array.from(m.children).forEach(child => {
					if (!child.classList || child.classList.contains('__auto_backdrop')) return;
					child.classList.add('modal-content-high');
				});
			} catch (e) {
				console.error('modal helper error', e);
			}
		});

		const observer = new MutationObserver(records => {
			records.forEach(r => {
				if (r.type === 'attributes' && r.attributeName === 'class') {
					const target = r.target;
					if (target.matches && target.matches(modalSelector)) {
						if (!target.classList.contains('hidden')) {
							document.body.classList.add('modal-open');
							target.setAttribute('aria-modal', 'true');
							const focusable = target.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
							if (focusable && typeof focusable.focus === 'function') focusable.focus();
						} else {
							const anyVisible = Array.from(document.querySelectorAll(modalSelector)).some(x => !x.classList.contains('hidden'));
							if (!anyVisible) document.body.classList.remove('modal-open');
							target.removeAttribute('aria-modal');
						}
					}
				}
			});
		});

		modals.forEach(m => observer.observe(m, { attributes: true, attributeFilter: ['class'] }));
	});
	</script>

</body>

</html>